{% extends "layout.html" %}
{% block content %}
  <main class="main">
    <!-- Page Title -->
    <div class="page-title light-background">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">تسویه حساب</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="{{ url_for('main.home') }}" style="color:#5d4b38">خانه</a></li>
            <li class="current">تسویه حساب</li>
          </ol>
        </nav>
      </div>
    </div><!-- End Page Title -->
    <!-- Checkout Section -->
    <section id="checkout" class="checkout section">
      <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row">
          <div class="col-lg-7">
            <!-- Checkout Form -->
            <div class="checkout-container" data-aos="fade-up">
              <form action="{{ url_for('cart.place_order') }}" method="POST">
                <!-- Customer Information -->
                <div class="checkout-section" id="customer-info">
                  <div class="section-header">
                    <div class="section-number">1</div>
                    <h3>اطلاعات مشتری</h3>
                  </div>
                  <div class="section-content">
                    <div class="row">
                      <div class="col-md-6 form-group">
                        <label for="name">نام و نام خانوادگی</label>
                        <input type="text" name="customer_name" class="form-control" id="name" placeholder="نام و نام خانوادگی خود را وارد نمایید" required="">
                      </div>
                      <div class="col-md-6 form-group">
                        <label for="number">شماره تماس</label>
                        <input type="text" class="form-control" name="customer_phone" id="number" placeholder="شماره تماس خود را وارد نمایید" required="">
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="address">آدرس</label>
                      <input type="text" class="form-control" name="customer_address" id="address" placeholder="آدرس خود را وارد نمایید" required="">
                    </div>
                  </div>
                </div>
                <!-- Order Review -->
                <div class="checkout-section" id="order-review">
                  <div class="section-header">
                    <div class="section-number">2</div>
                    <h3>بررسی و ثبت سفارش</h3>
                  </div>
                  <div class="section-content">
                    <div class="place-order-container">
                      <button type="submit" class="btn btn-primary place-order-btn">
                        <span class="btn-text">ثبت سفارش</span>
                        <span class="btn-price">{{ "{:,.0f}".format(total_price+50000) }}</span>
                      </button>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="col-lg-5">
            <!-- Order Summary -->
            <div class="order-summary" data-aos="fade-left" data-aos-delay="200">
              <div class="order-summary-header">
                <h3>خلاصه سفارش</h3>
                <span class="item-count">{{items_count}} Items</span>
              </div>
              <div class="order-summary-content">

                <div class="order-items">
                  {% for item in cart_items %}
                  <div class="order-item">
                    <div class="order-item-image">
                      <img src="{{ url_for('admin.static', filename='uploads/' + item.product.image_file) }}" alt="{{ item.product.name }}" class="img-fluid">
                    </div>
                    <div class="order-item-details">
                      <h4>{{ item.product.name }}</h4>
                      <div class="order-item-price">
                        <span class="quantity">{{ item.quantity }} ×</span>
                        <span class="price">{{ "{:,.0f}".format(item.product.price) }}</span>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>

                <div class="order-totals">
                  <div class="order-subtotal d-flex justify-content-between">
                    <span>جمع خرید</span>
                    <span>{{ "{:,.0f}".format(total_price) }}</span>
                  </div>
                  <div class="order-tax d-flex justify-content-between">
                    <span>Tax</span>
                    <span>50/000</span>
                  </div>
                  <div class="order-total d-flex justify-content-between">
                    <span>جمع کل</span>
                    <span>{{ "{:,.0f}".format(total_price+50000) }} تومان</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Terms and Privacy Modals -->
        <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="termsModalLabel">Terms and Conditions</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.</p>
                <p>Suspendisse in orci enim. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.</p>
                <p>Suspendisse in orci enim. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">I Understand</button>
              </div>
            </div>
          </div>
        </div>
        <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="privacyModalLabel">Privacy Policy</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla enim.</p>
                <p>Suspendisse in orci enim. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.</p>
                <p>Suspendisse in orci enim. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">I Understand</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section><!-- /Checkout Section -->

  </main>
{% endblock %}
